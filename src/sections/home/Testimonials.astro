---
// COMPONENTS //
import ToolBadge from "@/components/ToolBadge.astro";
import Image from "astro/components/Image.astro";
import { Icon } from "astro-icon/components";

// DATA //
import { testimonialSectionDetails } from "@/data/testimonials.ts";

const { badgeIcon, badgeTitle, title, testimonialItems } = testimonialSectionDetails;

// Active index (you can change later for slider)
const activeItem = testimonialItems[0]; // default first
---

<section>
  <div
    class="container mx-auto flex w-full flex-col items-center justify-center gap-10 px-6 py-20 md:gap-12 md:py-24 lg:gap-14 lg:py-28"
  >
    <!-- Header -->
    <div class="relative flex w-full flex-col gap-20 md:gap-28 lg:gap-36">
      <div class="flex flex-col items-center justify-center gap-4 md:gap-5 lg:gap-6">
        <!-- ToolBadge component -->
        <ToolBadge icon={badgeIcon} text={badgeTitle} />

        <!-- Title -->
        <p class="text-center text-2xl leading-tight font-medium md:text-4xl lg:text-6xl">
          {title}
        </p>
      </div>

      <!-- Active Testimonial Text -->
      <div
        class="font-regular text-n-950 relative mx-auto w-full text-left text-base leading-normal md:w-[72%] md:text-center md:text-xl lg:text-center lg:text-2xl xl:w-[55%]"
      >
        {activeItem.testimonial}
        <!-- Inverted Commas -->
        <Icon
          name="commas"
          class="absolute -top-[45px] left-1 size-10 sm:-top-[6%] sm:-left-[16%] md:-top-[10%] md:-left-[12%] md:size-12 lg:size-16"
        />
      </div>
    </div>

    <!-- Clients Profiles -->
    <div class="flex w-full justify-end gap-3 md:gap-5 lg:gap-6 lg:pr-64">
      <!-- Active Profile  -->
      <div
        class="bg-n-950 flex items-center justify-center gap-2.5 rounded-full py-0.5 pr-5 pl-1 md:gap-3.5 md:py-2 md:pr-6 md:pl-2 lg:gap-4 lg:py-2 lg:pr-6 lg:pl-2"
      >
        <!-- Profile image -->
        <Image
          src={activeItem.clientImage}
          alt={activeItem.clientName}
          width={64}
          height={64}
          class="size-9 rounded-full object-cover md:size-14 lg:size-16"
        />

        <div class="text-n-100">
          <!-- Name -->
          <p class="text-sm leading-tight font-bold md:text-lg lg:text-xl">
            {activeItem.clientName}
          </p>

          <!-- Company -->
          <p class="text-xs leading-tight md:text-sm lg:text-base">
            {activeItem.brandName}
          </p>
        </div>
      </div>

      <!-- Other Clients -->
      <div class="flex items-center justify-center gap-2.5 md:gap-3.5 lg:gap-4">
        {
          testimonialItems.map((testimonialItem) => (
            <Image
              src={testimonialItem.clientImage}
              alt={testimonialItem.clientName}
              width={72}
              height={72}
              class="size-9 rounded-full object-cover transition-all duration-600 hover:scale-125 hover:shadow-[0_0_21.7px_0_#2B7FFF] md:size-14 lg:size-16"
            />
          ))
        }
      </div>
    </div>
  </div>
</section>
