---
// COMPONENTS //
import { Image } from "astro:assets";

// SVG's //
import Ball from "@/assets/3d-ball.svg";
import TagIcon from "@/assets/3d-tag.svg";

const heroDetails = {
  balls: "/3d-ball-1.svg",
  icon: "/3d-code-icon.svg",
  title: ["We’re the", "Geeks", "behind your", "next", "Big Tech Story."],
  subText: "Smart builds. Good vibes. Great stories.",
};
---

<!-- Hero Section Start -->
<section>
  <div
    class="relative container mx-auto flex flex-col items-center justify-center gap-9 overflow-hidden px-6 py-36 text-center md:py-52 lg:py-40 xl:pt-52 2xl:pt-64 2xl:pb-52"
  >
    <!-- Top-left floating 3D ball -->
    <Image
      src={Ball}
      alt="3d ball primary"
      class="floating-icon absolute top-[22%] left-6 w-9 sm:left-[20%] md:top-[380px] md:left-[50px] md:w-16 lg:top-[65%] lg:left-[16%] lg:w-20 2xl:left-[20%]"
      style="animation-duration: 5s"
    />
    <!-- Bottom-right floating 3D ball (rotated) -->
    <Image
      src={Ball}
      alt="3d ball secondary"
      class="floating-icon absolute right-[10%] bottom-[46%] w-5 rotate-[-20deg] sm:right-[26%] md:right-[200px] md:bottom-40 md:w-11 lg:right-[35%] 2xl:bottom-[14%]"
      style="animation-duration: 4s"
    />

    <!-- Hero Text Wrapper -->
    <div class="flex flex-col items-center justify-center gap-3 md:gap-0 xl:w-full">
      <!--  Line 1: “We’re the Geeks” -->
      <p
        class="text-n-950 text-3xl leading-none font-normal tracking-tight md:text-7xl xl:text-8xl"
      >
        <span class="word-container" data-animate-word>
          {heroDetails.title[0]}
        </span>
        <span class="word-container font-bold" data-animate-word>
          {heroDetails.title[1]}
        </span>
      </p>

      <!--  Line 2: “behind your” -->
      <p
        class="text-n-950 flex items-center justify-center text-center text-3xl leading-tight font-normal tracking-tight text-nowrap md:text-7xl xl:text-8xl"
      >
        <!-- Line 3: "next" -->
        <span class="word-container" data-animate-word>
          {heroDetails.title[2]}
        </span>

        <!-- Tag icon -->
        <Image
          src={TagIcon}
          alt="3d-code-icon"
          class="floating-icon inline-block w-14 align-middle md:w-44 xl:w-60"
          style={"animation-duration: 5s"}
        />
        <span class="word-container" data-animate-word>
          {heroDetails.title[3]}
        </span>
      </p>

      <!--  Line 4: “Big Tech Story.” -->
      <p
        class="text-n-950 text-3xl leading-none font-semibold tracking-[-0.02em] md:text-7xl xl:text-8xl"
      >
        <span class="word-container" data-animate-word>
          {heroDetails.title[4]}
        </span>
      </p>
    </div>
    <!-- Subtext -->
    <p
      class="z-10 bg-gradient-to-r from-[#6654D4] to-[#8B77F3] bg-clip-text text-center text-sm leading-loose font-medium text-transparent md:text-xl xl:text-2xl"
    >
      {heroDetails.subText}
    </p>
  </div>
</section>
<style>
  @keyframes float {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-12px);
    }
    100% {
      transform: translateY(0);
    }
  }

  .floating-icon {
    animation: float 6s ease-in-out infinite;
    will-change: transform;
  }
  .word-container {
    display: inline-block;
    opacity: 0;
    transform: translateX(15%);
    transition:
      opacity 2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
      transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transition-delay: 0ms; /* This will be set by JS */
  }

  /* This class is added by JS to trigger the final state */
  .word-container.is-visible {
    opacity: 1;
    transform: translateX(0);
  }
</style>
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    // Select all words
    const wordContainers = document.querySelectorAll("[data-animate-word]");
    let delay = 0;
    const wordDelay = 120; // 120ms delay between each word

    wordContainers.forEach((wordContainer) => {
      // Apply the CSS transition-delay to each word
      wordContainer.style.transitionDelay = `${delay}ms`;
      // Increment delay for the next word
      delay += wordDelay;
    });

    // Start the animation after a brief moment to ensure all delays are set
    setTimeout(() => {
      wordContainers.forEach((container) => {
        container.classList.add("is-visible");
      });
    }, 50);
  });
</script>
